{"version":3,"sources":["webpack://@askvortsov/flarum-categories/webpack/bootstrap","webpack://@askvortsov/flarum-categories/./forum.js","webpack://@askvortsov/flarum-categories/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-categories/./src/forum/components/CategoriesPage.js","webpack://@askvortsov/flarum-categories/./src/forum/components/Category.js","webpack://@askvortsov/flarum-categories/./src/forum/components/LastDiscussionWidget.js","webpack://@askvortsov/flarum-categories/./src/forum/components/ModifiedUserCard.js","webpack://@askvortsov/flarum-categories/./src/forum/components/StatWidget.js","webpack://@askvortsov/flarum-categories/./src/forum/index.js","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['components/AvatarEditor']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['components/IndexPage']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['components/Page']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['helpers/avatar']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['tags/helpers/tagLabel']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['tags/utils/sortTags']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['utils/humanTime']\"","webpack://@askvortsov/flarum-categories/external \"flarum.core.compat['utils/string']\""],"names":["CategoriesPage","init","Page","prototype","call","tags","sortTags","app","store","all","filter","tag","parent","history","push","translator","trans","extend","IndexPage","items","current","forum","attribute","item","remove","view","pinned","position","cloud","classes","join","hero","affixSidebar","listItems","sidebarItems","toArray","map","Category","component","length","tagLabel","link","config","args","m","route","setTitle","setTitleCount","TagsPage","props","isChild","undefined","collapsed","window","addEventListener","redraw","compactMobileMode","innerWidth","children","child","cardStyle","backgroundColor","color","classNames","lastDiscussionClassNames","lastPostedDiscussion","childrenInContent","renderedChildren","stopProp","iconItems","mainItems","e","toggleArrow","icon","statItems","lastDiscussionItems","ItemList","style","iconClasses","add","className","name","description","StatWidget","count","discussionCount","label","postCount","LastDiscussionWidget","discussion","isInitialized","$","bind","addClass","hasClass","closest","removeClass","preventDefault","stopPropagation","element","on","apply","arguments","Component","cardVisible","user","lastPostedUser","card","ModifiedUserCard","controlsButtonClassName","avatar","humanTime","lastPostedAt","username","truncate","title","timeout","clearTimeout","setTimeout","showCard","hideCard","controls","UserControls","badges","Dropdown","menuClassName","buttonClassName","editable","AvatarEditor","infoItems","lastSeenAt","online","isOnline","joinTime","ago","compactMobile","initializers","routes","categories","path","Tag","Model","has","LinkButton","href","replace"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport Page from 'flarum/components/Page';\nimport IndexPage from 'flarum/components/IndexPage';\nimport listItems from 'flarum/helpers/listItems';\nimport humanTime from 'flarum/helpers/humanTime';\n\nimport sortTags from 'flarum/tags/utils/sortTags';\nimport tagLabel from 'flarum/tags/helpers/tagLabel';\nimport TagsPage from 'flarum/tags/components/TagsPage';\n\nimport Category from './Category';\n\nexport default class CategoriesPage extends TagsPage {\n  init() {\n    Page.prototype.init.call(this);\n\n    this.tags = sortTags(app.store.all('tags').filter(tag => !tag.parent()));\n\n    app.history.push('categories', app.translator.trans('askvortsov-category.forum.header.back_to_categories_tooltip'));\n\n    extend(IndexPage.prototype, 'sidebarItems', function (items) {\n      if (app.current instanceof CategoriesPage && app.forum.attribute('categories.fullPageDesktop')) {\n        for (const item in items.items) {\n          if (item != 'newDiscussion' && item != 'nav') {\n            items.remove(item);\n          }\n        }\n      }\n      return items;\n    });\n  }\n\n  view() {\n    const pinned = this.tags.filter(tag => tag.position() !== null);\n    const cloud = this.tags.filter(tag => tag.position() === null);\n\n    const classes = app.forum.attribute('categories.fullPageDesktop') ? ['CategoriesPage', 'TagsPage'] : ['CategoriesPage'];\n\n    return (\n      <div className={classes.join(' ')}>\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className={app.forum.attribute('categories.fullPageDesktop') ? '' : 'sideNavContainer'}>\n            <nav className=\"CategoriesPage-nav TagsPage-nav IndexPage-nav sideNav\" config={IndexPage.prototype.affixSidebar}>\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n\n            <div className=\"CategoriesPage-content sideNavOffset\">\n              <ol className=\"TagCategoryList\">\n                {pinned.map(tag => {\n                  return (Category.component({ tag }));\n                })}\n              </ol>\n\n              {cloud.length ? (\n                <div className=\"TagCloud\">\n                  {cloud.map(tag => [\n                    tagLabel(tag, { link: true }),\n                    ' ',\n                  ])}\n                </div>\n              ) : ''}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  config(...args) {\n    super.config(...args);\n\n    if (m.route() != \"/\") {\n      app.setTitle(app.translator.trans('askvortsov-categories.forum.meta.categories_title'));\n    } else {\n      app.setTitle('');\n    }\n    app.setTitleCount(0);\n  }\n}\n","import Component from 'flarum/Component';\n\nimport icon from 'flarum/helpers/icon';\nimport ItemList from 'flarum/utils/ItemList';\nimport sortTags from 'flarum/tags/utils/sortTags';\n\nimport StatWidget from './StatWidget';\nimport LastDiscussionWidget from './LastDiscussionWidget';\n\nexport default class Category extends Component {\n    init() {\n        super.init();\n\n        this.tag = this.props.tag;\n\n        this.isChild = this.props.parent != null && this.props.parent != undefined;\n\n        this.collapsed = false;\n\n        window.addEventListener(\"resize\", function () {\n            m.redraw();\n        });\n    }\n\n    view() {\n        this.compactMobileMode = window.innerWidth <= 767 && app.forum.attribute('categories.compactMobile');\n        const tag = this.tag;\n\n        const children = this.isChild ? [] : sortTags(app.store.all('tags').filter(child => child.parent() === tag));\n\n        const cardStyle = this.isChild ? {} : { backgroundColor: tag.color() };\n\n        const classNames = ['TagCategory'];\n        if (this.isChild) {\n            classNames.push('SubCategory');\n        } else {\n            classNames.push('ParentCategory');\n        }\n        if (this.compactMobileMode) {\n            classNames.push('compactMobile');\n        }\n\n        const lastDiscussionClassNames = (tag.lastPostedDiscussion() ? ['TagCategory-lastDiscussion'] : ['TagCategory-lastDiscussion empty']).join(' ');\n\n        const childrenInContent = !this.isChild && this.compactMobileMode;\n\n        const renderedChildren = (<ol className=\"TagCategory-subTagList\">\n            {children.map(child => [\n                Category.component({ tag: child, parent: this })\n            ])}\n        </ol>);\n\n        return (\n            <li class={classNames.join(' ')}>\n                <a class=\"TagCategory-content\"\n                    style={cardStyle}\n                    href={app.route.tag(tag)}\n                    config={this.stopProp}>\n                    <div class=\"TagCategory-alignStart\">\n                        <div class=\"TagCategory-alignStart-main\">\n                            <span class=\"TagCategory-icon\">\n                                {this.iconItems().toArray()}\n                            </span>\n                            <div class=\"TagCategory-main\">\n                                {this.mainItems().toArray()}\n                            </div>\n                        </div>\n                        {children.length == 0 ? '' : <p class=\"TagCategory-toggleArrow\" onclick={(e) => { this.toggleArrow(e) }}>{icon(this.collapsed ? 'fas fa-caret-down' : 'fas fa-caret-up')}</p>}\n                    </div>\n                    <div class=\"TagCategory-alignEnd\">\n                        <div class=\"TagCategory-stats StatWidgetList\">\n                            {this.statItems().toArray()}\n                        </div>\n                        <div class={lastDiscussionClassNames}>\n                            {this.lastDiscussionItems().toArray()}\n                        </div>\n                    </div>\n                    {childrenInContent && !this.collapsed ? renderedChildren : ''}\n                </a>\n                {!childrenInContent && !this.isChild ? renderedChildren: ''}\n            </li>\n        );\n    }\n\n    iconItems() {\n        const items = new ItemList;\n\n        if (this.tag.icon() && this.isChild) {\n            const style = {};\n            let iconClasses = 'fa-stack-1x CategoryIcon';\n            if (app.forum.attribute('categories.childBareIcon')) {\n                style.color = this.tag.color();\n                iconClasses += ' NoBackgroundCategoryIcon';\n            }\n            const classes = this.compactMobileMode ? 'fa-stack fa-1x' : 'fa-stack fa-2x';\n            items.add('icon',\n                <span class={classes}>\n                    {app.forum.attribute('categories.childBareIcon') ?\n                        '' : <i class=\"fa fa-circle fa-stack-2x icon-background\" style={{ color: this.tag.color() }}></i>}\n                    {icon(this.tag.icon(), { className: iconClasses, style: style })}\n                </span>, 10);\n        } else if (this.tag.icon() && !app.forum.attribute('categories.parentRemoveIcon')) {\n            const classes = this.compactMobileMode ? 'fa-stack fa-2x' : 'fa-stack fa-3x';\n            items.add('icon',\n                <span class={classes}>\n                    {icon(this.tag.icon(), { className: 'fa-stack-1x CategoryIcon' })}\n                </span>, 10);\n        }\n\n        return items;\n    }\n\n    mainItems() {\n        const items = new ItemList;\n\n        items.add('name', <h4 class=\"TagCategory-name\">{this.tag.name()}</h4>, 15)\n\n        if (this.tag.description() && (this.isChild || !app.forum.attribute('categories.parentRemoveDescription'))) {\n            items.add('description', <div class=\"TagCategory-description\">{this.tag.description()}</div>, 10)\n        }\n\n        return items;\n    }\n\n    statItems() {\n        const items = new ItemList;\n\n        if (this.isChild || !app.forum.attribute('categories.parentRemoveStats')) {\n            items.add('discussionCount', StatWidget.component({\n                count: this.tag.discussionCount(),\n                label: app.translator.trans('askvortsov-categories.forum.stat-widgets.discussion_label'),\n                icon: 'fas fa-file-alt',\n            }), 15)\n\n            items.add('postCount', StatWidget.component({\n                count: this.tag.postCount(),\n                label: app.translator.trans('askvortsov-categories.forum.stat-widgets.post_label'),\n                icon: 'fas fa-comment',\n            }), 10)\n        }\n\n        return items;\n    }\n\n    lastDiscussionItems() {\n        const items = new ItemList;\n\n        if (this.isChild || !app.forum.attribute('categories.parentRemoveLastDiscussion')) {\n            items.add('lastDiscussion', LastDiscussionWidget.component({\n                discussion: this.tag.lastPostedDiscussion()\n            }), 10);\n        }\n\n        return items;\n    }\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        this.$('.TagCategory-content,.TagCategory-toggleArrow').bind('mouseenter', function (e) {\n            $(this).addClass('hover');\n            if ($(this).parent().hasClass('SubCategory') || $(this).hasClass('TagCategory-toggleArrow')) {\n                $(this).closest('.ParentCategory').children('.TagCategory-content').removeClass('hover');\n            }\n        });\n\n        this.$('.TagCategory-content,.TagCategory-toggleArrow').bind('mouseleave', function (e) {\n            $(this).removeClass('hover');\n            if ($(this).parent().hasClass('SubCategory') || $(this).hasClass('TagCategory-toggleArrow')) {\n                $(this).closest('.ParentCategory').children('.TagCategory-content').addClass('hover');\n            }\n        });\n    }\n\n    toggleArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.collapsed = !this.collapsed;\n        m.redraw();\n    }\n\n    stopProp(element, isInitialized) {\n        if (isInitialized) return;\n        $(element).on('click', e => e.stopPropagation());\n        m.route.apply(this, arguments);\n    }\n}","import Component from 'flarum/Component';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport humanTime from 'flarum/helpers/humanTime';\nimport { truncate } from 'flarum/utils/string';\nimport ModifiedUserCard from './ModifiedUserCard';\n\nexport default class LastDiscussionWidget extends Component {\n    init() {\n        /**\n         * Whether or not the user hover card is visible.\n         *\n         * @type {Boolean}\n         */\n        this.cardVisible = false;\n    }\n\n    view() {\n        const discussion = this.props.discussion;\n\n\n        if (!discussion) {\n            return (\n                <div class=\"LastDiscussion\">\n                    {app.translator.trans('askvortsov-categories.forum.last_discussion_widget.no_discussions')}\n                </div>\n            );\n        }\n\n        const user = discussion.lastPostedUser();\n\n        let card = '';\n\n        if (user && this.cardVisible) {\n            card = ModifiedUserCard.component({\n                user,\n                className: 'UserCard--popover',\n                controlsButtonClassName: 'Button Button--icon Button--flat',\n            });\n        }\n\n        return (\n            <a class=\"LastDiscussion\" href={app.route.discussion(discussion)} config={this.stopProp}>\n                <a className=\"LastDiscussion-avatar\" href={user ? app.route.user(user) : '#'} config={this.stopProp}>\n                    {avatar(user)}\n                </a>\n                <div class=\"LastDiscussion-content\">\n                    <div class=\"LastDiscussion-bottomRow\">\n                        {humanTime(discussion.lastPostedAt())} <a className=\"LastDiscussion-usernameLink\" href={user ? app.route.user(user) : '#'} config={this.stopProp}>  |  {username(user)}</a>\n                    </div>\n                    <div class=\"LastDiscussion-topRow\">\n                        {truncate(discussion.title(), 26)}\n                    </div>\n                </div>\n                <div class=\"LastDiscussion-userCardContainer\">{card}</div>\n            </a>\n        );\n    }\n\n    stopProp(element, isInitialized) {\n        if (isInitialized) return;\n        $(element).on('click', e => e.stopPropagation());\n        m.route.apply(this, arguments);\n    }\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        let timeout;\n\n        this.$()\n            .on('mouseover', '.LastDiscussion-avatar, .LastDiscussion-usernameLinkUserCard, .username, .UserCard', () => {\n                clearTimeout(timeout);\n                timeout = setTimeout(this.showCard.bind(this), 300);\n            })\n            .on('mouseout', '.LastDiscussion-avatar, .LastDiscussion-usernameLinkUserCard, .username, .UserCard', () => {\n                clearTimeout(timeout);\n                timeout = setTimeout(this.hideCard.bind(this), 150);\n            });\n    }\n\n    /**\n   * Show the user card.\n   */\n    showCard() {\n        this.cardVisible = true;\n\n        m.redraw();\n\n        setTimeout(() => this.$('.UserCard').addClass('in'));\n    }\n\n    /**\n     * Hide the user card.\n     */\n    hideCard() {\n        $('.UserCard').removeClass('in')\n        this.cardVisible = false;\n        m.redraw();\n    }\n}","import Component from 'flarum/Component';\nimport humanTime from 'flarum/utils/humanTime';\nimport ItemList from 'flarum/utils/ItemList';\nimport UserControls from 'flarum/utils/UserControls';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport icon from 'flarum/helpers/icon';\nimport Dropdown from 'flarum/components/Dropdown';\nimport AvatarEditor from 'flarum/components/AvatarEditor';\nimport listItems from 'flarum/helpers/listItems';\n\n/**\n * The `UserCard` component displays a user's profile card. This is used both on\n * the `UserPage` (in the hero) and in discussions, shown when hovering over a\n * post author.\n *\n * ### Props\n *\n * - `user`\n * - `className`\n * - `editable`\n * - `controlsButtonClassName`\n */\nexport default class ModifiedUserCard extends Component {\n    view() {\n        const user = this.props.user;\n\n        const controls = UserControls.controls(user, this).toArray();\n        const color = user.color();\n        const badges = user.badges().toArray();\n\n        return (\n            <div className={'UserCard ' + (this.props.className || '')}\n                style={color ? { backgroundColor: color } : ''}>\n                <div className=\"darkenBackground\">\n\n                    <div className=\"container\">\n                        {controls.length ? Dropdown.component({\n                            children: controls,\n                            className: 'UserCard-controls App-primaryControl',\n                            menuClassName: 'Dropdown-menu--right',\n                            buttonClassName: this.props.controlsButtonClassName,\n                            label: app.translator.trans('core.forum.user_controls.button'),\n                            icon: 'fas fa-ellipsis-v'\n                        }) : ''}\n\n                        <div className=\"UserCard-profile\">\n                            <h2 className=\"UserCard-identity\">\n                                {this.props.editable\n                                    ? [AvatarEditor.component({ user, className: 'UserCard-avatar' }), username(user)]\n                                    : (\n                                        <a href={app.route.user(user)} config={this.stopProp}>\n                                            <div className=\"UserCard-avatar\">{avatar(user)}</div>\n                                            {username(user)}\n                                        </a>\n                                    )}\n                            </h2>\n\n                            {badges.length ? (\n                                <ul className=\"UserCard-badges badges\">\n                                    {listItems(badges)}\n                                </ul>\n                            ) : ''}\n\n                            <ul className=\"UserCard-info\">\n                                {listItems(this.infoItems().toArray())}\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    /**\n     * Build an item list of tidbits of info to show on this user's profile.\n     *\n     * @return {ItemList}\n     */\n    infoItems() {\n        const items = new ItemList();\n        const user = this.props.user;\n        const lastSeenAt = user.lastSeenAt();\n\n        if (lastSeenAt) {\n            const online = user.isOnline();\n\n            items.add('lastSeen', (\n                <span className={'UserCard-lastSeen' + (online ? ' online' : '')}>\n                    {online\n                        ? [icon('fas fa-circle'), ' ', app.translator.trans('core.forum.user.online_text')]\n                        : [icon('far fa-clock'), ' ', humanTime(lastSeenAt)]}\n                </span>\n            ));\n        }\n\n        if (user.joinTime()) {\n            items.add('joined', app.translator.trans('core.forum.user.joined_date_text', { ago: humanTime(user.joinTime()) }));\n        }\n\n        return items;\n    }\n\n    stopProp(element, isInitialized) {\n        if (isInitialized) return;\n        $(element).on('click', e => e.stopPropagation());\n        m.route.apply(this, arguments);\n    }\n}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\n\nexport default class StatWidget extends Component {\n    view() {\n        const compactMobile = app.forum.attribute('categories.compactMobile') && window.innerWidth < 767;\n        return (\n            <div class=\"StatWidget\">\n                <div class=\"StatWidget-count\">\n                    {this.props.count}\n                </div>\n                <div class=\"StatWidget-label\">\n                    {compactMobile ? icon(this.props.icon): this.props.label}\n                </div>\n            </div>\n        );\n    }\n}","import { extend } from 'flarum/extend';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport LinkButton from 'flarum/components/LinkButton';\r\nimport Model from 'flarum/Model';\r\nimport Tag from 'flarum/tags/models/Tag';\r\nimport CategoriesPage from './components/CategoriesPage';\r\n\r\napp.initializers.add('askvortsov/flarum-categories', () => {\r\n  app.routes.categories = { path: '/categories', component: CategoriesPage.component() };\r\n\r\n  Tag.prototype.postCount = Model.attribute('postCount');\r\n\r\n  extend(IndexPage.prototype, 'navItems', function (items) {\r\n    if (items.has('tags') && !app.forum.attribute('categories.keepTagsNav')) {\r\n      items.remove('tags');\r\n    }\r\n    items.add('categories', LinkButton.component({\r\n      icon: 'fas fa-th-list',\r\n      children: app.translator.trans('askvortsov-categories.forum.index.categories_link'),\r\n      href: app.route('categories')\r\n    }), -9.5);\r\n\r\n    if (items.has('moreTags')) {\r\n      items.replace('moreTags', LinkButton.component({\r\n        children: app.translator.trans('flarum-tags.forum.index.more_link'),\r\n        href: app.route('categories')\r\n      }))\r\n    }\r\n\r\n    return items;\r\n  });\r\n});\r\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/AvatarEditor'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['tags/helpers/tagLabel'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['tags/utils/sortTags'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/humanTime'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}